@page "/catalog"
@page "/catalog/{category}"
@using BlazorWasm.Components

<PageTitle>Clothes</PageTitle>
<CategorySelector SelectedCategory="@SelectedName" />
<TelescopeList />

@code {
	[Inject]
	public IDataService DataService { get; set; }
	[Parameter] public string Category { get; set; }
	public string? SelectedName { get; set; }

	protected override async Task OnParametersSetAsync()
	{
		await DataService.GetTelescopesListAsync(Category);
		if (Category != null)
			SelectedName = DataService?.Categories?.FirstOrDefault(c => c.NormalizedName.Equals(Category))?.Name;
		else SelectedName = "Все";
	}
}